#!/bin/sh

# TODO: sed-able with @
program_version=0.0.0
datadir=/usr/share/abuild

if ! [ -f "$datadir/functions.sh" ]; then
	echo "$datadir/functions.sh: not found" >&2
	exit 1
fi
. "$datadir/functions.sh"

# defaults
BUILD_BASE="build-base"

create() {
	:
}

verify() {
	[ "$APORTSDIR" ] || die "can't locate \$APORTSDIR"
	git rev-parse 2>/dev/null || die "not in a git tree"
}

usage() {
	cat >&2 <<-EOF
	$program $program_version
	usage: $program <command>

	Commands:
	 create  create lxc containers for every branch
	EOF
}

verify

cmd=$1
shift

case $cmd in
	create)
		$cmd "$@"
		;;
	*)
		usage
		;;
esac

#!/bin/sh

opt=""

if which vainfo >/dev/null && vainfo >/dev/null; then
  opt="-vo vaapi"
fi

case $1 in
  *.rar) 7z x -so $1 2>/dev/null | /usr/bin/mplayer $opt -;;
  *) /usr/bin/mplayer $opt "$@";;
esac
